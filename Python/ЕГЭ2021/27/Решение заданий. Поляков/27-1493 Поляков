#Хочется отметить, что это не самая простая задача. Если Вы не знакомы с Методом Частичных Сумм (далее МЧС) и не знакомы с модулем itertools, то разберитесь с основами

#(№ 4193) (А. Богданов) Набор данных состоит из групп натуральных чисел,
# каждая группа записана в отдельной строке. В любой группе содержится не менее двух чисел.
# Из каждой группы нужно выбрать одно или несколько чисел так чтобы их сумма была чётной.
# Какую максимальную сумму выбранных чисел, не кратную 5, можно получить?

f=open('файлик') #считываем файл
n=int(f.readline()) #считываем кол-во групп
s=[0] #массив для макс сумм, с различными остатками от деления на 5

#начинаем проходить по всему файлу, считывая строчки
for _ in range(n):
    a=[int(x) for x in f.readline().split()] #считывем числа из строки в массив, при этом первый элемент(a[0])- кол-во чисел в группе по условию
    w=[] #массив четных сумм (далее понятнее будет)
    #идея такова: нам нужны различный четные суммы групп, состоящих из 1,2,3 и т.д чисел, удобнее всего использовать itertools
    #k отвечает за кол-во элементов в группе, a[0]-макс длина
    for k in range(1,a[0]+1):
        import itertools
        d=a[1:] #обрезаем массив (1 число нам не нужно, т.к это кол-во чисел в группе)
        e=itertools.combinations(d,k)
        for i in e:
            if (sum(i)%2==0): w.append(sum(i)) #если сумма четная, то добавляем в массив w

    w.sort()

    #далее пошел классический МЧС
    p=[a+b for a in s for b in w]
    s={x%5:x for x in sorted(p)}.values()

m=max(x for x in s if x%5!=0) #находим максимум, который не делится на 5
print(m)
